\chapter{Repairing and Generating Dockerfiles (title is WIP)} \label{chap:sota}

This section covers existing literature and tools that are related to several components of the Dockerfile development experience and Docker in general. Section \ref{background} goes over the background that is required to understand this paper. Section \ref{speeding_up_docker_builds} goes over ways to accelerate Docker builds. Section \ref{dockerfile_generation} goes over works that cover the generation of Dockerfiles. Section \ref{dockerfile_smells} covers smells in Dockerfiles. Section \ref{dockerfile_good_practices} talks about good practices that should be taken into account when writing Dockerfiles. Section \ref{dockerfile_security} tackles the topic of security in Dockerfiles. Section \ref{dockerfile_repair} covers the detection and repair of faults in Dockerfiles. Section \ref{dockerfile_bloat} covers the detection and removal of bloat in Dockerfiles. Section \ref{dockerfile_testing} is about testing Dockerfiles. Section \ref{general_discussion} concludes with a general discussion.

\section{Background} \label{background}
...
\section{Speeding up Docker builds} \label{speeding_up_docker_builds}

Building Docker images can take a considerable amount of time, especially when a large amount of files have to be fetched from the internet ~\citep{harterSlackerFastDistribution}. Therefore, we looked for ways to reduce the amount of time consumed by this activity. Our findings are summarized in Table \ref{tab:works_speeding_up}.

\begin{table}[H]
    \centering
    \begin{tabular}{|p{0.25\textwidth}|c|p{0.2\textwidth}|p{0.2\textwidth}|}
        \hline \textbf{Name} & \textbf{Speedup} & \textbf{Limitations} & \textbf{Implementation Complexity} \\
        \hline A Code Injection Method for Rapid Docker Image Building \cite{wangCodeInjectionMethod2019} & Up to 100000x faster & Can only be used with interpreted languages, limited to modifications in the source code & High \\
        \hline FastBuild: Accelerating Docker Image Building for Efficient Development and Deployment of Container \cite{huangFastBuildAcceleratingDocker2019} & Up to 10x faster & Limited to network activity & High \\
        \hline Slacker: Fast Distribution with Lazy Docker Containers \cite{harterSlackerFastDistribution} & Up to 20x faster & Limited to network activity & High \\
        \hline Docker Buildx \cite{DockerBuildx2022} & Unknown & Unknown & Low-Medium \\
        \hline
    \end{tabular} 
    \caption{Works about speeding up Docker builds}
    \label{tab:works_speeding_up}
\end{table}

Wang et al. \cite{wangCodeInjectionMethod2019} propose a technique that bypasses typical building procedures by injecting the code modifications directly in an image. The results are very promising. However, due to the nature of approach, it can only be used with interpreted languages and will not accelerate builds related to modifications in development artifacts that are not source code.

Huang et al. \cite{huangFastBuildAcceleratingDocker2019} and Harter et al. \cite{harterSlackerFastDistribution} address the network bottleneck in different ways. The former caches files locally and intercepts Docker's network requests in order to serve files that have been stored locally. The latter proposes a new storage driver that lazily fetches files from the network. Both show promising results and do not address other inefficiencies in the Docker building process.

The works described so far interfere with the normal Docker build procedures, making them harder to implement. Another solution is offered by the Docker development team, Buildx \cite{DockerBuildx2022}. Buildx makes use of a newer backend, BuildKit \cite{BuildKit2022}, which brings many features that can potentially accelerate docker builds. However, to our knowledge, an apples to apples time comparison has not been made. Implementing this in Dockerlive wouldn't be very hard but because the output of the buildx command is different, some modifications would still be required.

\section{Dockerfile Generation} \label{dockerfile_generation}
\section{Dockerfile Smells} \label{dockerfile_smells}
\section{Dockerfile Good Practices} \label{dockerfile_good_practices}
\section{Dockerfile Security} \label{dockerfile_security}
\section{Dockerfile Repair} \label{dockerfile_repair}
\section{Dockerfile Bloat} \label{dockerfile_bloat}
\section{Dockerfile Testing} \label{dockerfile_testing}




\section{General Discussion} \label{general_discussion}

% Neste capítulo é ilustrada a introdução de entradas no índice
% remissivo e são feitas citações para a bibliografia.

% Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec a
% eros. Phasellus non nulla non massa venenatis convallis. In
% porta. Mauris quis magna. 

% \section{Introdução}

% Neste capítulo usa-se texto de um artigo apresentado na Conferência
% XATA2006~\citep{kn:MVL06-xata}.

% Nos últimos tempos têm surgido diversas soluções, apresentadas por
% empresas do sector Auto\-ma\-ção de Sistemas para a disponibilização de
% sistemas \scadadms{} na \textit{Web}.

% Fusce risus mi, tristique eu, consectetuer id, auctor sed, elit. Donec
% laoreet. Duis consectetuer interdum libero. Etiam eu orci. In eu
% arcu. Fusce luctus diam eget lectus. Duis interdum lacus sed
% ligula. Proin vestibulum felis eget lacus. Vivamus vestibulum, tellus
% ut congue viverra, mauris lacus tempor turpis, eu congue nisi magna at
% dolor. Ut molestie vehicula libero. Praesent in neque sed risus tempus
% ornare. Donec hendrerit, erat eu semper aliquam, pede nulla dapibus
% risus, ut pretium orci pede et neque.
% Etiam eget tortor a metus convallis viverra. Quisque eget nisi sed
% orci facilisis interdum. Aliquam non felis. 

% \section{Secção Exemplo}\label{sec:dialecto}

% \emph{Scalable Vector Graphics}\index{SVG}\index{XML!SVG} é uma
% linguagem em formato XML que descreve gráficos de duas dimensões. 
% Este formato padronizado pela W3C (\emph{World Wide Web Consortium})
% é livre de patentes ou direitos de autor e está totalmente
% documentado, à semelhança de outros W3C
% standards~\citep{kn:svgdoc}.

% Sendo uma linguagem XML, o \svg{} herda uma série de vantagens: a
% possibilidade de transformar \svg{} usando técnicas como
% XSLT\index{XML!XSLT}, de embeber \svg{} em qualquer documento
% XML\index{XML} usando \textit{namespaces} ou até de  
% estilizar \svg{} recorrendo a CSS\index{CSS} (\emph{Cascade Style Sheets}). 
% De uma forma geral, pode dizer-se que \svg{}s interagem bem com as
% atuais tecnologias ligadas ao XML e à Web, tal como referido
% em~\citep{kn:svgibm,kn:svgw3c}.

% Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec a
% eros. Phasellus non nulla non massa venenatis convallis. In
% porta. Mauris quis magna. Proin mauris eros, aliquet id, eleifend
% vitae, semper quis, erat. Aliquam id lectus non odio dignissim
% blandit. Vestibulum porttitor arcu ut ligula. Nunc quis
% erat. Curabitur ipsum tortor, ornare vitae, dapibus pretium, hendrerit
% sed, urna. Vestibulum ante ipsum primis in faucibus orci luctus et
% ultrices posuere cubilia Curae; Phasellus bibendum, nulla eget varius
% aliquam, tortor nulla sollicitudin quam, vel vestibulum nisl magna at
% sem. Aliquam velit sapien, ultrices viverra, tempus quis, ultrices at,
% dui. Aliquam sit amet justo. Quisque tristique, metus eu iaculis
% sagittis, urna leo bibendum diam, a ultricies sem diam a augue. Mauris
% consectetuer, libero vel euismod tincidunt, nisi metus viverra ante,
% quis pretium sapien odio nec risus. Nunc semper auctor
% nulla\footnote{Exemplo de nota de rodapé.}. 

% \subsection{Subsecção Exemplo} \label{batik} 

% Batik é um conjunto de bibliotecas baseadas em \textit{Java} que
% permitem o uso de imagens \svg{} (visualização, geração ou
% manipulação) em aplicações ou \textit{applets}~\citep{kn:batik}.  
% O projeto Batik\index{Batik} destina-se a fornecer ao programador
% alguns módulos que permitem desenvolver soluções especificas usando
% \svg~\citep{kn:svgdoc}. 

% Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Nunc eu
% nulla. Pellentesque vitae nibh ultrices quam iaculis
% convallis. Aliquam purus eros, varius eget, volutpat sodales,
% imperdiet nec, lacus. Curabitur in elit sed sem rutrum posuere. Class
% aptent taciti sociosqu ad litora torquent per conubia nostra, per
% inceptos himenaeos. Duis sem. Praesent ultricies odio vel
% sapien. Integer faucibus malesuada libero. Cras semper, dolor id
% ullamcorper varius, magna risus volutpat felis, id pellentesque nulla
% ante at erat. Integer sodales. 

% Quisque sit amet odio. In at risus sit amet turpis interdum
% posuere. Maecenas iaculis vehicula sem. Ut leo arcu, malesuada vel,
% imperdiet id, dignissim a, purus. Duis eleifend, lectus non venenatis
% dignissim, risus libero imperdiet mi, nec gravida massa libero sed
% mauris. Nullam lobortis libero non sapien. Integer convallis iaculis
% erat. Morbi dictum. Ut ultrices pellentesque velit. Cras ac
% ante. Etiam in neque tincidunt lacus gravida vehicula. Proin et nisi. 

% Vivamus non nunc nec risus tempor varius. Quisque bibendum mi at
% dolor. Aliquam consectetuer condimentum risus. Aliquam luctus pulvinar
% sem. Duis aliquam, urna et vulputate tristique, dui elit aliquet nibh,
% vel dignissim magna turpis id sapien. Duis commodo sem id
% quam. Phasellus dolor. Class aptent taciti sociosqu ad litora torquent
% per conubia nostra, per inceptos himenaeos. 

% \subsection{Subsecção Exemplo}

% Loren ipsum dolor sit amet, consectetuer adipiscing elit. 
% Praesent sit amet sem. Maecenas eleifend facilisis leo. Vestibulum et
% mi. Aliquam posuere, ante non tristique consectetuer, dui elit
% scelerisque augue, eu vehicula nibh nisi ac est. Suspendisse elementum
% sodales felis. Nullam laoreet fermentum urna. 

% Duis eget diam. In est justo, tristique in, lacinia vel, feugiat eget,
% quam. Pellentesque habitant morbi tristique senectus et netus et
% malesuada fames ac turpis egestas. Fusce feugiat, elit ac placerat
% fermentum, augue nisl ultricies eros, id fringilla enim sapien eu
% felis. Vestibulum ante ipsum primis in faucibus orci luctus et
% ultrices posuere cubilia Curae; Sed dolor mi, porttitor quis,
% condimentum sed, luctus in. 

% \section{Resumo ou Conclusões}

% Aliquam erat volutpat. Nunc pede ipsum, porttitor eu, bibendum non,
% bibendum nec, nisl. Maecenas eget mauris. Nullam pulvinar. Curabitur
% rutrum commodo est. Nam sapien pede, interdum eu, accumsan ultrices,
% venenatis sit amet, tellus. Praesent ac ante bibendum enim varius
% suscipit. Donec enim. Proin nisi. Quisque libero turpis, varius ut,
% elementum vel, pulvinar sed, nunc. 
